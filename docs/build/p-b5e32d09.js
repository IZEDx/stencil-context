const t=(...n)=>t.debug&&console.log(...n);t.debug=!1;const n=t,e=()=>{};function r(t,r,i){const o=t[r]||e;t[r]=async function(...t){n(r,this);const e=await i(this);let s=await o.apply(this,t);return e instanceof Function&&await e(this),s}}function i(t){var n;const e=null===(n=t)||void 0===n?void 0:n.el;if(e instanceof Object&&"function"==typeof e.forceUpdate)return e;throw new h(`Property 'el' required on ${t}`)}const o=Symbol.for("stencil-quantum-providers");class s{constructor(t,n){this.key=t,this.value=n,this.listeners=[],this.hooks=new Map,this.retrieve=this.retrieve.bind(this),this.provide=this.provide.bind(this),this.listen=this.listen.bind(this)}retrieve(){return this.value}provide(t){return this.value=t,this.listeners.forEach(n=>n(t)),this}update(t){return this.provide(t(this.retrieve()))}listen(t){return this.listeners=[...this.listeners,t],t(this.value),()=>{this.listeners=this.listeners.filter(n=>n!==t)}}attach(t,e){n("Add Provider",t,this);const r=s.getAttached(t);return r.includes(this)||r.push(this),n("Total Providers",t,r),e?this:this.hook(t)}isHooked(t){return this.hooks.has(t)}hook(t){return n("Hook Provider",t,this),this.hooks.set(t,this.listen(()=>t.forceUpdate())),this}unhook(t){return n("Unhook Provider",t,this),this.isHooked(t)&&(this.hooks.get(t)(),this.hooks.delete(t)),this}static find(t,e){var r,i,o,c;n("Searching Provider",e,t);const a=s.getAttached(t).filter(t=>t.key===e);if(a.length>1)throw new h(`Found multiple "${String(e)}" providers on the same object!`);if(1===a.length)return a[0];let u=null!=(o=null!=(r=t.parentElement)?r:null===(i=t.shadowRoot)||void 0===i?void 0:i.host)?o:null===(c=t.parentNode)||void 0===c?void 0:c.host;if(!u)throw new h(`No provider in hierarchy found that matches "${String(e)}"!`);return s.find(u,e).attach(t,!0)}static create(t,e,r){return n("Create Provider",t,e,r),new s(e,r).attach(t)}static getAttached(t){return t[o]instanceof Array||(t[o]=[]),t[o]}}const c=Symbol.for("stencil-quantum-error");class h extends Error{constructor(t,n){super(t instanceof Error?t.message:t),this.target=n,t instanceof Error&&Object.assign(this,t)}}function a(t,n){const e=new h(n,t);console.error(e);try{s.find(t,c).provide(e)}catch(r){throw e}}function u(){return function(t,n){const e=new s(c,t[n]);r(t,"componentWillLoad",t=>{const n=i(t);try{e.attach(n),e.hook(n)}catch(r){a(n,r)}}),delete t[n]&&Object.defineProperty(t,n,{get:e.retrieve,set:e.provide,enumerable:!0,configurable:!0})}}function l(t){return function(n,e){const o=new s(t=t||e,n[e]);r(n,"componentWillLoad",t=>{const n=i(t);try{o.attach(n),o.hook(n)}catch(e){a(n,e)}}),delete n[e]&&Object.defineProperty(n,e,{get:o.retrieve,set:o.provide,enumerable:!0,configurable:!0})}}function d(t){return function(n,e){let o,c;t=t||e,r(n,"componentWillLoad",n=>{const e=i(n);try{(o=s.find(e,t)).hook(e)}catch(r){}return()=>{try{o&&o.unhook(e),(o=s.find(e,t)).hook(e)}catch(r){a(e,r)}}}),delete n[e]&&Object.defineProperty(n,e,{get:()=>o&&o.retrieve()||c,set:t=>c=t,enumerable:!0,configurable:!0})}}function f(t){return function(n,e,o){t=t||e;const c=o.value;return r(n,"componentWillLoad",n=>{const e=i(n);let r=()=>{};try{const i=s.find(e,t);r=i.listen(t=>{try{return c.apply(n,[t])}catch(r){a(e,r)}})}catch(o){}return()=>{r();try{s.find(e,t).listen(t=>{try{return c.apply(n,[t])}catch(o){a(e,o)}})}catch(o){a(e,o)}}}),o}}export{d as C,l as P,f as W,u as a,s as b,n as l,a as t};